<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>通知发布系统</title>
		<link rel="stylesheet" href="lib/layui-v2.6.3/css/layui.css">
		<style>
			body {
				padding: 20px;
				background-color: #f5f7fa;
			}
			.form-container {
				background-color: #fff;
				padding: 30px;
				border-radius: 8px;
				box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
				max-width: 800px;
				margin: 0 auto;
			}
			.page-title {
				text-align: center;
				color: #333;
				margin-bottom: 30px;
				font-weight: 600;
			}
			.required::before {
				content: "*";
				color: #ff0000;
				margin-right: 4px;
				font-weight: bold;
			}
			.btn-group {
				margin-top: 20px;
				text-align: center;
			}
			.btn-group .layui-btn {
				margin: 0 10px;
			}
			.layui-form-item {
				margin-bottom: 25px;
			}
		</style>
	</head>
	<body>
		<div class="form-container">
			<h1 class="page-title">通知发布</h1>
			
			<form class="layui-form" lay-filter="notificationForm">
				<div class="layui-form-item">
					<label class="layui-form-label required">通知标题</label>
					<div class="layui-input-block">
						<input type="text" name="title" lay-verify="required" placeholder="请输入通知标题" autocomplete="off" class="layui-input">
					</div>
				</div>
				
				<div class="layui-form-item">
					<label class="layui-form-label required">通知类型</label>
					<div class="layui-input-block">
						<select name="type" lay-verify="required">
							<option value="">请选择通知类型</option>
							<option value="1">普通通知</option>
							<option value="2">重要通知</option>
							<option value="3">紧急通知</option>
						</select>
					</div>
				</div>
				
				<div class="layui-form-item">
					<label class="layui-form-label required">通知范围</label>
					<div class="layui-input-block">
						<input type="checkbox" name="range" value="all_teachers" lay-skin="primary" title="全体教师">
						<input type="checkbox" name="range" value="all_students" lay-skin="primary" title="全体学生">
						<div style="margin-top: 10px;">
							<input type="checkbox" name="range" value="class_1" lay-skin="primary" title="1班">
							<input type="checkbox" name="range" value="class_2" lay-skin="primary" title="2班">
							<input type="checkbox" name="range" value="class_3" lay-skin="primary" title="3班">
							<input type="checkbox" name="range" value="class_4" lay-skin="primary" title="4班">
							<input type="checkbox" name="range" value="class_5" lay-skin="primary" title="5班">
							<input type="checkbox" name="range" value="class_6" lay-skin="primary" title="6班">
						</div>
					</div>
				</div>
				
				<div class="layui-form-item">
					<label class="layui-form-label">发布时间</label>
					<div class="layui-input-block">
						<input type="text" name="publishTime" class="layui-input" id="publishTime" placeholder="请选择发布时间">
					</div>
				</div>
				
				<div class="layui-form-item layui-form-text">
				    <label class="layui-form-label required">通知内容</label>
				    <div class="layui-input-block">
				        <textarea name="content" lay-verify="required" placeholder="请输入通知内容" class="layui-textarea" rows="6"></textarea>
				    </div>
				</div>
				
				<div class="layui-form-item btn-group">
					<button class="layui-btn layui-btn-normal" lay-submit lay-filter="saveBtn">确认发布</button>
					<button type="reset" class="layui-btn layui-btn-primary">取消</button>
				</div>
			</form>
		</div>
		
		<script src="lib/layui-v2.6.3/layui.js"></script>
		<script>
			layui.use(['form', 'laydate', 'layer'], function() {
				var form = layui.form;
				var laydate = layui.laydate;
				var layer = layui.layer;
				
				// 初始化日期时间选择器
				laydate.render({
					elem: '#publishTime',
					type: 'datetime',
					value: new Date() // 默认当前时间
				});
				
				// 表单验证
				form.verify({
					// 自定义内容验证
					content: function(value) {
						if(value.length < 10) {
							return '通知内容不能少于10个字符';
						}
					}
				});
				
				// 监听表单提交
				form.on('submit(saveBtn)', function(data) {
					// 验证通知范围至少选择一项
					if(!data.field.range || (Array.isArray(data.field.range) && data.field.range.length === 0)) {
						layer.msg('请至少选择一个通知范围', {icon: 2, time: 2000});
						return false;
					}
					
					// 模拟提交数据
					console.log('提交的数据:', data.field);
					
					// 显示成功提示
					layer.msg('通知发布成功！', {
						icon: 1,
						time: 2000
					}, function() {
						// 可以在这里添加提交成功后的操作，如跳转页面
						// location.href = 'notification-list.html';
					});
					
					return false; // 阻止表单跳转
				});
			});
		</script>
	</body>
</html>
